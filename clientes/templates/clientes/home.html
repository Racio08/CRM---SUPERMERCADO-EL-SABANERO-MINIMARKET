{% extends 'clientes/base.html' %}

{% block title %}Inicio - EL SABANERO MINIMARKET{% endblock %}

{% block content %}
<div class="card">
    <h1>ğŸ›’ Bienvenido al CRM de EL SABANERO MINIMARKET</h1>
    <p style="margin-top: 1rem; font-size: 1.1rem;">Sistema de gestiÃ³n de clientes y programa de fidelizaciÃ³n.</p>
    
    {% if user.is_authenticated %}
        <div style="margin-top: 2rem;">
            <h2>Â¡Hola, {{ user.first_name|default:user.username }}!</h2>
            <p>Accede a tus funciones desde el menÃº superior.</p>
            <div style="margin-top: 1rem;">
                <a href="{% url 'clientes:ver_puntos' %}" class="btn">Ver Mis Puntos</a>
                <a href="{% url 'clientes:registrar_factura' %}" class="btn btn-success">Registrar Factura</a>
            </div>
        </div>
    {% else %}
        <div style="margin-top: 2rem;">
            <h2>CaracterÃ­sticas del sistema:</h2>
            <ul style="margin: 1rem 0 1rem 2rem; line-height: 2;">
                <li>âœ… Registro de facturas y acumulaciÃ³n de puntos</li>
                <li>âœ… Sistema de niveles: Bronce, Plata, Oro</li>
                <li>âœ… Ranking mensual de clientes</li>
                <li>âœ… GestiÃ³n de campaÃ±as promocionales</li>
                <li>âœ… Sistema de premios y referidos</li>
            </ul>
            <a href="{% url 'admin:login' %}" class="btn" style="margin-top: 1rem;">Iniciar SesiÃ³n</a>
        </div>
    {% endif %}
</div>

{% if campanas_activas %}
<div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h2 style="color: white; border-bottom: 2px solid white; padding-bottom: 0.5rem;">ğŸ‰ Â¡CAMPAÃ‘AS ACTIVAS AHORA!</h2>
    {% for campana in campanas_activas %}
    <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; margin: 1rem 0; border-radius: 8px; border-left: 4px solid #ffd700;">
        <h3 style="color: #ffd700; font-size: 1.5rem; margin-bottom: 0.5rem;">{{ campana.nombre }}</h3>
        <p style="font-size: 1.1rem; margin: 0.5rem 0;">{{ campana.descripcion }}</p>
        <div style="display: flex; gap: 2rem; margin-top: 1rem; font-size: 0.9rem;">
            <span>ğŸ“… VÃ¡lido hasta: <strong>{{ campana.fecha_fin|date:"d/m/Y" }}</strong></span>
            <span>â­ Multiplicador: <strong style="color: #ffd700; font-size: 1.3rem;">x{{ campana.multiplicador_puntos }}</strong></span>
        </div>
    </div>
    {% endfor %}
    <p style="margin-top: 1rem; text-align: center; font-size: 1.1rem; font-weight: bold;">
        ğŸ’° Â¡Registra tus facturas ahora y multiplica tus puntos!
    </p>
</div>
{% endif %}

{% if proximas_campanas %}
<div class="card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
    <h2 style="color: white; border-bottom: 2px solid white; padding-bottom: 0.5rem;">ğŸ”œ PrÃ³ximas CampaÃ±as</h2>
    {% for campana in proximas_campanas %}
    <div style="background: rgba(255,255,255,0.1); padding: 1rem; margin: 0.5rem 0; border-radius: 8px;">
        <h4 style="color: white; margin-bottom: 0.3rem;">{{ campana.nombre }}</h4>
        <p style="font-size: 0.95rem; margin: 0.3rem 0;">{{ campana.descripcion }}</p>
        <span style="font-size: 0.85rem;">ğŸ“… Inicia: {{ campana.fecha_inicio|date:"d/m/Y" }} | Multiplicador: x{{ campana.multiplicador_puntos }}</span>
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="card">
    <h2>ğŸ“Š Niveles de Cliente</h2>
    <table>
        <thead>
            <tr>
                <th>Nivel</th>
                <th>Puntos Requeridos</th>
                <th>Beneficios</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><span class="nivel nivel-bronce">Bronce</span></td>
                <td>0 - 1,999 puntos</td>
                <td>AcumulaciÃ³n bÃ¡sica de puntos</td>
            </tr>
            <tr>
                <td><span class="nivel nivel-plata">Plata</span></td>
                <td>2,000 - 4,999 puntos</td>
                <td>Bonificaciones especiales</td>
            </tr>
            <tr>
                <td><span class="nivel nivel-oro">Oro</span></td>
                <td>5,000+ puntos</td>
                <td>MÃ¡ximos beneficios y premios exclusivos</td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}
